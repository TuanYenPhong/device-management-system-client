<div [hidden]="!tableHidden">
  <div *ngIf="!checkModal" class="card my-5">
    <div class="card-body _scrollmenu">

      <label>Search: <input type="text" [(ngModel)] = "query"></label>
      <button
      type="button"
      class="btn btn-primary"
      (click)="hiddenForm()">
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>

      <table class="table table-bordered table-striped">
        <tbody>
          <tr>
            <th scope="col">Action</th>
            <th scope="col">STT</th>
            <th scope="col">Loại device</th>
            <th scope="col">Mã device</th>
            <th scope="col">Nội dung</th>
            <th scope="col">Ngày sửa</th>
            <th scope="col">Ngày hoàn thành</th>
            <th scope="col">Trạng thái</th>
          </tr>
          <tr
            *ngFor="
              let d of dataRepair | searchfilter: query
                | paginate: { itemsPerPage: 4, currentPage: p };
              let i = index
            "
          >
          <td class="text-center">
            <button (click)="deleteRepair(d.id)">
              <i class="fa fa-trash-o" style="font-size: 25px"></i>
            </button>
            <button (click)="staticModal.show();editRepair(d.id)">
              <i
                class="fa fa-pencil-square-o"
                aria-hidden="true"
                style="font-size: 25px"
              ></i>
            </button>
          </td>
            <td></td>
            <td>{{d.entities.typeDevice}}</td>
            <td>{{d.entities.codeDevice}}</td>
            <td>{{d.description}}</td>
            <td>{{d.dateRepair}}</td>
            <td>{{d.dateFinish}}</td>
            <td>{{ status[d.status-1].namestatus }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <pagination-controls (pageChange)="p = $event"></pagination-controls>
  </div>


</div>

<div
    class="modal fade"
    bsModal
    #staticModal="bs-modal"
    [config]="{ backdrop: 'static' }"
    tabindex="-1"
    role="dialog"
    aria-labelledby="dialog-static-name"
  >
    <div *ngIf="checkModal" class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Chỉnh sửa thiết bị sửa chữa</h3>
        </div>
        <div class="modal-body">
            <div class="col-md-9">
              <form>
                <fieldset>
                  <div class="row">
                  <div class="col form-group">
                    <label for="Name"
                      ><span class="req">* </span> Code device:
                    </label>

                    <input
                      [(ngModel)]="groupSelected"
                      [typeahead]="device"
                      typeaheadOptionField="codeDevice"
                      value="{{groupSelected}}"
                      [ngModelOptions]="{standalone: true}"
                      class="form-control"
                  />
                  </div>
                  <!-- <div class="form-group">
                    <label for="Name"
                      ><span class="req">* </span> Code device:
                    </label>
                    <input
                    required
                    type="text"
                    [(ngModel)]="repair.entities.codeDevice"
                    name="codeDevice"
                    id="name"
                    class="form-control phone"
                    maxlength="28"
                    placeholder="Enter your code device..."
                  />
                </div> -->
                <div class="col form-group">
                  <label for="website">Status:</label>
                  <select
                    [(ngModel)]="repair.status"
                    [ngModelOptions]="{standalone: true}"
                    class="form-control"
                    name="status"
                  >
                    <option
                      *ngFor="let s of status"

                      [(ngValue)]="s.id"
                    >
                      {{ s.namestatus }}
                    </option>
                  </select>
                </div>

              </div>

              <div class="row">
                <div class="col form-group">
                    <label for="date-input"
                      >Date Repair</label
                    >

                      <input
                        [ngModel]="repair.dateRepair | date: 'yyyy-MM-dd'"
                        (ngModelChange)="repair.dateRepair = $event"
                        class="form-control"
                        type="date"
                        name="dateRepair"
                        placeholder="date"
                      />

                </div>

                <div class="col form-group">
                  <label for="date-input"
                    >Date Finish</label
                  >

                    <input
                      [ngModel]="repair.dateFinish | date: 'yyyy-MM-dd'"
                      (ngModelChange)="repair.dateFinish = $event"
                      class="form-control"
                      type="date"
                      name="dateFinish"
                      placeholder="date"
                    />

              </div>
            </div>

                  <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="textarea-input"
                      >Content</label
                    >
                    <div class="col-md-9">
                      <textarea
                        [(ngModel)]="repair.description"
                        id="textarea-input"
                        name="textarea-input"
                        rows="9"
                        class="form-control"
                        placeholder="Content.."
                      ></textarea>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>

        </div>
        <div class="modal-body _actionModel">
          <button
            type="button"
            class="btn btn-primary"
            (click)="staticModal.hide();changeEdit()"
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-danger"
            (click)="staticModal.hide();decline()"
          >
            No
          </button>
        </div>
      </div>
    </div>
  </div>

<!-- Form Thêm sửa chữa  -->
<div class="container _editForm" [hidden]="!formHidden">
  <!-- <div class="row"> -->
    <div class="col-md-9">
      <form (keydown.enter)="$event.preventDefault()">
        <p>Nhập quản lý sửa chữa</p>
        <fieldset>
        <div class="row">
          <div class="col form-group">
            <label for="Name"
              ><span class="req">* </span> Code Device:
            </label>

            <input
                      [(ngModel)]="groupSelected"
                      [typeahead]="device"
                      typeaheadOptionField="codeDevice"
                      value="{{groupSelected}}"
                      [ngModelOptions]="{standalone: true}"
                      class="form-control"
            />

          </div>

          <div class="col form-group">
            <label for="website">Status:</label>
            <select
              [(ngModel)]="repair.status"
              class="form-control"
              name="status"
            >
              <option
                *ngFor="let s of status"
                [(ngValue)]="s.id"
              >
                {{ s.namestatus }}
              </option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col form-group">
            <label for="date-input"
              >Date repair:</label
            >
            <div>
              <input
                [(ngModel)]="repair.dateRepair"
                class="form-control"
                id="dateRepair"
                type="date"
                name="dateRepair"
                placeholder="date"
              />
            </div>
          </div>

          <div class="col form-group">
            <label for="date-input"
              >Date finish:</label
            >
            <div>
              <input
                [(ngModel)]="repair.dateFinish"
                class="form-control"
                id="dateFinish"
                type="date"
                name="dateFinish"
                placeholder="date"
              />
            </div>
          </div>
        </div>
          <div class="form-group">
            <label for="textarea-input"
              >Content:</label
            >
            <div>
              <textarea
                [(ngModel)]="repair.description"
                id="textarea-input"
                name="textarea-input"
                rows="9"
                class="form-control"
                placeholder="Content.."
              ></textarea>
            </div>
          </div>

          <div class="form-group action">
            <input
              class="btn btn-success"
              type="submit"
              name="submit_reg"
              value="Save"
              (click)="createRepair()"
            />
            <input
              class="btn btn-success"
              type="submit"
              name="submit_reg"
              value="Cancel"
              (click)="cancelForm()"
            />
          </div>
        </fieldset>
      </form>
    </div>
  </div>

